<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Rent</title>
        <style>
            #user-info {
                color: green;
            }
        </style>
    </head>
    <body>
        <a href="{% url 'app:index' %}">Home</a>
        <p></p>
        <form id="email-form">
            <label for="email_id">Email Id:</label>
            <input type="email" id="email_id" name="email_id">
            <input type="submit" value="Submit">
        </form>
        <p id="user-info"></p>

    
        <script>
            document.getElementById("email-form").addEventListener("submit", function(event) {
                event.preventDefault();
                var email = document.getElementById("email_id").value;
                var userInfoRequest = new XMLHttpRequest();
                userInfoRequest.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var user = JSON.parse(this.responseText);
                        var userInfo = document.getElementById("user-info");
                        userInfo.innerHTML = email + "<br>" + user.first_name + " " + user.last_name;
                    }
                };
                userInfoRequest.open("GET", "{% url 'app:db_user' %}?email_id=" + email, true);
                userInfoRequest.send();
            });
        </script>
    </body>
</html>